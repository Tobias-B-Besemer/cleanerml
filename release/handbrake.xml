<?xml version="1.0" encoding="UTF-8"?>
<!--

    BleachBit
    Copyright (C) 2008-2019 Andrew Ziem
    https://www.bleachbit.org

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

    @app HandBrake
    @url https://handbrake.fr/
    @os Windows, Linux
    @cleanerversion v0.5.0
    @cleanerdate 2019-03-18
    @cleanerby RogÃ©rio Theodoro de Brito (2012 - 2013) & Erratalog (2016) & Tobias B. Besemer (2019-03-18)
    @tested ok v???, Windows ???
    @testeddate ???
    @testedby ???
    @note This cleaner makes the WinApp2.ini entries to Handbrake necessary!

-->
<cleaner id="handbrake">
  <label>HandBrake</label>
  <description>Video transcoder</description>
  <!-- Not yet figured out:
  <running type="exe" os="linux">handbrake</running>
  -->
  <running type="exe" os="windows">Handbrake</running>
  <var name="ProgramFiles">
    <!--
    Linux $$ProgramFiles$$ not yet figured out! I will do this later! Tobias.
    <value os="linux">~/.config/ghb</value>
    -->
    <!--
    Windows itself changes %ProgramFiles% for 32-bit processes running in a 64-bit operating system as documented here:
    https://docs.microsoft.com/en-us/windows/desktop/winprog64/wow64-implementation-details
    ...so we use %SystemDrive%\Program Files\ & %SystemDrive%\Program Files (x86)\...
    -->
    <value os="windows">%SystemDrive%\Program Files\HandBrake</value>
    <value os="windows">%SystemDrive%\Program Files (x86)\HandBrake</value>
  </var>
  <option id="logs">
    <label>Logs</label>
    <description>Delete the logs</description>
    <!-- Linux: -->
    <action command="delete" search="glob" path="~/.config/ghb/Activity.log.*"/>
    <action command="delete" search="walk.files" path="~/.config/ghb/EncodeLogs/"/>
    <!-- Windows: -->
    <action command="delete" search="walk.files" path="%AppData%\HandBrake\logs\"/>
  </option>
  <option id="queues">
    <label>Queues</label>
    <description>Delete the files</description>
    <!-- Linux: -->
    <action command="delete" search="glob" path="~/.config/ghb/queue.*"/>
    <!-- Windows: -->
    <action command="delete" search="glob" path="%AppData%\HandBrake\hb_queue_recovery*.xml"/>
  </option>
  <option id="temp">
    <label>Temporary files</label>
    <description>Delete the temporary files</description>
    <!-- Delete *.tmp recursive: -->
    <action command="delete" search="walk.files" path="~/.config/ghb/" regex="\.[Tt][Mm][Pp]$"/>
    <action command="delete" search="walk.files" path="%AppData%\HandBrake\" regex="\.[Tt][Mm][Pp]$"/>
  </option>
  <option id="crash_reports">
    <label>Crash reports</label>
    <description>Delete the files</description>
    <action command="delete" search="glob" path="$$ProgramFiles$$\*.stackdump"/>
    <action command="delete" search="glob" path="%LocalAppData%\VirtualStore\Program Files*\HandBrake\*.stackdump"/>
  </option>
</cleaner>
